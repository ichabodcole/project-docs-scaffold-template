# Migration: v2.5 → v2.6

## Summary

v2.6 renames all `archive/` directories to `_archive/` so they consistently sort
to the top of directory listings in file browsers. This is a quality-of-life
improvement — the underscore prefix guarantees archive folders appear first,
reducing visual noise when scanning for active content.

**Why this changed:** Archive directories starting with `a` sometimes sorted
near other folders (like `architecture/`) rather than clearly at the top. The
`_archive/` convention makes them immediately identifiable and always first in
alphabetical listings.

## What Changed

| Before                    | After                      |
| ------------------------- | -------------------------- |
| `backlog/archive/`        | `backlog/_archive/`        |
| `briefs/archive/`         | `briefs/_archive/`         |
| `investigations/archive/` | `investigations/_archive/` |
| `projects/archive/`       | `projects/_archive/`       |
| `reports/archive/`        | `reports/_archive/`        |

## What's New

Nothing new is added — this is a rename-only change.

## What's Removed

Nothing is removed — archive directories are renamed, not deleted.

## Step-by-Step Migration

### 1. Rename archive directories

Rename each `archive/` directory to `_archive/`. Only rename directories that
exist in your project:

```bash
# Rename archive directories (skip any that don't exist)
[ -d docs/backlog/archive ] && mv docs/backlog/archive docs/backlog/_archive
[ -d docs/briefs/archive ] && mv docs/briefs/archive docs/briefs/_archive
[ -d docs/investigations/archive ] && mv docs/investigations/archive docs/investigations/_archive
[ -d docs/projects/archive ] && mv docs/projects/archive docs/projects/_archive
[ -d docs/reports/archive ] && mv docs/reports/archive docs/reports/_archive
```

If using git, prefer `git mv` to preserve history:

```bash
[ -d docs/backlog/archive ] && git mv docs/backlog/archive docs/backlog/_archive
[ -d docs/briefs/archive ] && git mv docs/briefs/archive docs/briefs/_archive
[ -d docs/investigations/archive ] && git mv docs/investigations/archive docs/investigations/_archive
[ -d docs/projects/archive ] && git mv docs/projects/archive docs/projects/_archive
[ -d docs/reports/archive ] && git mv docs/reports/archive docs/reports/_archive
```

### 2. Update path references in documentation

Search for and update all `archive/` path references in your docs:

```bash
# Find path references to archive/ (excluding verb uses like "archive it")
grep -rn "archive/" docs/ --include="*.md" | grep -v "_archive/"
```

Common patterns to update:

| Old Reference             | New Reference              |
| ------------------------- | -------------------------- |
| `backlog/archive/`        | `backlog/_archive/`        |
| `projects/archive/`       | `projects/_archive/`       |
| `investigations/archive/` | `investigations/_archive/` |
| `reports/archive/`        | `reports/_archive/`        |
| `briefs/archive/`         | `briefs/_archive/`         |
| `fragments/archive/`      | `fragments/_archive/`      |
| Move to `archive/`        | Move to `_archive/`        |

**Important:** Only update path references. Do NOT change:

- "archive" used as a verb ("archive it", "archive when done", "archive freely")
- "Archived" as a status value ("Status: Archived")
- Conceptual references ("move stale fragments to archive")

### 3. Update AGENTS.md or CLAUDE.md

Check if your root-level agent context files reference archive paths:

```bash
grep -n "archive/" AGENTS.md CLAUDE.md docs/AGENTS.md docs/CLAUDE.md 2>/dev/null
```

Update any path references found.

### 4. Update docs/README.md version

Update the `docs_version` frontmatter to match the target version:

```yaml
---
docs_version: "2.6.0"
---
```

## Verification

```bash
# Archive directories should be renamed
ls -d docs/*/_archive/ 2>/dev/null

# _archive should sort first in each directory
ls docs/projects/
ls docs/backlog/

# No stale archive/ path references (verb uses are fine)
grep -rn "archive/" docs/ --include="*.md" | grep -v "_archive/" | grep -v "archive it\|archive when\|archive freely\|Status.*Archived\|Archive when\|archive the"

# Version marker should be updated
grep "docs_version" docs/README.md
```

## Checklist

- [ ] Renamed all `archive/` directories to `_archive/`
- [ ] Updated path references in documentation files
- [ ] Updated AGENTS.md/CLAUDE.md if they reference archive paths
- [ ] Updated `docs_version` frontmatter
- [ ] Verified no stale `archive/` path references remain
