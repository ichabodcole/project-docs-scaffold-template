# Migration: v2.4 → v2.5

## Summary

v2.5 adds the **Brief** document type — a lightweight document that captures the
identity and direction of an idea before any implementation decisions are made.
Briefs are the output of a workshop session and sit at the very beginning of the
documentation lifecycle, before investigations and projects.

**Why this changed:** The existing workflow assumed a refined idea as its entry
point — you jumped into investigations, proposals, and dev plans. But there was
no structured way to go from a rough idea or problem statement to something
concrete enough to act on. Briefs fill this gap by providing a "pre-project"
phase where ideas get workshopped into clear direction.

## What's New

| File/Directory                       | Purpose                                |
| ------------------------------------ | -------------------------------------- |
| `briefs/README.md`                   | Conventions for brief documents        |
| `briefs/TEMPLATES/BRIEF.template.md` | Template for project briefs            |
| `briefs/_archive/`                   | Archive directory for completed briefs |

## What Changed

| File/Directory   | Change                                                      |
| ---------------- | ----------------------------------------------------------- |
| `docs/README.md` | Added Ideation section, updated flowchart, cycle, reference |

## What's Removed

Nothing is removed in this migration.

## Step-by-Step Migration

### 1. Generate v2.5 scaffold locally

```bash
cookiecutter gh:ichabodcole/project-docs-scaffold-template -o .scaffold-tmp
```

### 2. Create briefs directory

```bash
SCAFFOLD=".scaffold-tmp/<project-name>/docs"

# Create directory structure
mkdir -p docs/briefs/TEMPLATES docs/briefs/_archive

# Copy README and template
cp "$SCAFFOLD/briefs/README.md" docs/briefs/README.md
cp "$SCAFFOLD/briefs/TEMPLATES/BRIEF.template.md" docs/briefs/TEMPLATES/BRIEF.template.md

# Add gitkeep for archive
touch docs/briefs/_archive/.gitkeep
```

### 3. Update docs/README.md

**3a. Structure section** — Add a new "Ideation" subsection between the
"Permanent Reference" section (ending with `/fragments`) and the "Discovery &
Assessment" section. Find:

```markdown
### Discovery & Assessment
```

Add before it:

```markdown
### Ideation

#### `/briefs`

Project briefs that capture the identity and direction of an idea before any
implementation decisions are made. Briefs are the output of a workshop session —
a focused conversation that develops a rough spark into something concrete
enough to act on. A brief might spawn investigations, projects, a manifesto, or
simply sit as a captured idea to revisit later.
```

**3b. Decision flowchart** — Add the brief decision as the first question in the
flowchart. Replace:

```
               START: You have work to track or document
                                  ↓
                ┌─────────────────────────────────┐
                │  Is this a small, well-defined   │
                │  task (bug, minor refactor,      │
                │  papercut)?                      │
                └─────────────────────────────────┘
```

With:

```
               START: You have work to track or document
                                  ↓
                ┌─────────────────────────────────┐
                │  Is this a rough, unrefined      │
                │  idea that needs shaping?        │
                └─────────────────────────────────┘
                          ↓              ↓
                        YES              NO
                          ↓              ↓
                       BRIEF     ┌─────────────────────────────────┐
                   (Workshop it) │  Is this a small, well-defined   │
                          ↓      │  task (bug, minor refactor,      │
                    Spawns next   │  papercut)?                      │
                    steps below   └─────────────────────────────────┘
```

Note: The rest of the flowchart needs to be indented to accommodate the new
branch. Copy from the scaffold's `docs/README.md` if easier than manually
adjusting indentation.

**3c. Documentation cycle** — Update the pipeline string:

```
# Before
Report → Investigation → Project (proposal → [design-resolution] → plan → [test-plan] → sessions) → Report

# After
Brief → Investigation → Project (proposal → [design-resolution] → plan → [test-plan] → sessions) → Report → ...
```

**3d. Quick Reference** — Add as the first entry:

```markdown
- **Brief:** "I have this idea — let me workshop it into something concrete."
  (identity and direction, pre-project)
```

**3e. Special cases** — Add:

```markdown
- **Rough idea that needs shaping?** → Brief (workshop it first)
```

**3f. Update version** — Update the `docs_version` frontmatter to match the
target version.

### 4. Clean up scaffold

```bash
rm -rf .scaffold-tmp
```

## Verification

```bash
# Briefs directory should exist with README and template
ls docs/briefs/README.md
ls docs/briefs/TEMPLATES/BRIEF.template.md

# docs/README.md should reference briefs
grep "briefs" docs/README.md

# Documentation cycle should start with Brief
grep "Brief →" docs/README.md

# Version marker should be updated
grep "docs_version" docs/README.md
```

## Checklist

- [ ] Generated v2.5 scaffold locally via cookiecutter
- [ ] Created `docs/briefs/` directory with README, template, and archive
- [ ] Updated `docs/README.md` structure section with Ideation/briefs
- [ ] Updated `docs/README.md` decision flowchart with brief as first question
- [ ] Updated `docs/README.md` documentation cycle string
- [ ] Updated `docs/README.md` Quick Reference with Brief entry
- [ ] Updated `docs/README.md` Special cases with Brief entry
- [ ] Updated `docs_version` frontmatter
- [ ] Removed `.scaffold-tmp/` directory
- [ ] Verified briefs directory and references exist
